<!DOCTYPE html>
<html>
<head>
  <title>Student Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
    body{background:#f4f6f9;}
    .navbar{width:100%;background:linear-gradient(135deg,#5f2c82,#49a09d);padding:15px 40px;display:flex;justify-content:space-between;align-items:center;color:white;}
    .logo{font-size:18px;font-weight:600;}
    .nav-links a{text-decoration:none;color:white;margin-left:25px;font-size:14px;font-weight:500;transition:0.3s;}
    .nav-links a:hover{opacity:0.8;}
    .hero{padding:60px 80px;text-align:center;}
    .hero h1{font-size:32px;margin-bottom:30px;color:#333;}

    .slider{width:100%;max-width:900px;height:300px;margin:30px auto 0 auto;border-radius:15px;overflow:hidden;position:relative;box-shadow:0 8px 20px rgba(0,0,0,0.1);}
    .slide{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;opacity:0;transition:opacity 0.8s ease-in-out;}
    .slide.active{opacity:1;}

    .upcoming{padding:40px 80px;}
    .upcoming h2{margin-bottom:25px;font-size:24px;color:#333;}
    .event-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;}

    .event-card{background:white;padding:20px;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.05);transition:0.3s;}
    .event-card:hover{transform:translateY(-5px);}
    .event-card h3{font-size:16px;margin-bottom:10px;color:#5f2c82;}
    .tag{font-size:11px;font-weight:600;background:#eee;padding:4px 8px;border-radius:20px;display:inline-block;margin-bottom:8px;}
    .event-card p{font-size:13px;color:#666;margin-bottom:6px;}
    .deadline{font-size:12px;font-weight:600;color:#e63946;margin-top:6px;}
    .footer{margin-top:60px;padding:20px;text-align:center;background:#5f2c82;color:white;font-size:13px;}
  </style>
</head>

<body>

<div class="navbar">
  <div class="logo">ðŸŽ“ College Logo</div>
  <div class="nav-links">
    <a href="student-dashboard.html">Home</a>
    <a href="events.html">Events</a>
    <a href="#">Status</a>
    <a href="#">Contact Us</a>
    <a href="login.html">Logout</a>
  </div>
</div>

<div class="hero">
  <h1>Welcome to Event Management System</h1>

  <div class="slider">
    <img src="images/h1.jpg" class="slide active">
    <img src="images/h2.jpg" class="slide">
    <img src="images/h3.jpg" class="slide">
  </div>
</div>

<div class="upcoming">
  <h2>Upcoming Events & Competitions</h2>
  <div class="event-container" id="eventContainer"></div>
</div>

<div class="footer">
  Â© 2026 College Event Management System
</div>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>

const supabaseUrl = "https://oszgllewojvqcbehrtub.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zemdsbGV3b2p2cWNiZWhydHViIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMjYzODIsImV4cCI6MjA4NzYwMjM4Mn0.Doz6ApUcY1HLsAx7HH1EX1Lx0QNLg7R3gl12jLfsmD0";

const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

const container = document.getElementById("eventContainer");

/* SLIDER LOGIC */
let currentSlide = 0;
const slides = document.querySelectorAll(".slide");

function showSlide(index){
  slides.forEach(slide => slide.classList.remove("active"));
  slides[index].classList.add("active");
}

function nextSlide(){
  currentSlide = (currentSlide + 1) % slides.length;
  showSlide(currentSlide);
}

setInterval(nextSlide, 3000);

/* EVENTS & COMPETITIONS */

function calculateDeadline(dateValue){
  const today = new Date();
  const eventDate = new Date(dateValue);

  const diffTime = eventDate - today;
  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

  if(diffDays === 0) return "Today";
  if(diffDays === 1) return "Tomorrow";
  if(diffDays > 1) return diffDays + " Days Left";
  return "Completed";
}

function createCard(title, date, venue, audience, type){
  const card = document.createElement("div");
  card.className = "event-card";

  let audienceHTML = "";
  if(type === "Event"){
    audienceHTML = `<p><strong>Audience:</strong> ${audience || "All Students"}</p>`;
  }

  card.innerHTML = `
    <div class="tag">${type}</div>
    <h3>${title}</h3>
    <p><strong>Date:</strong> ${date}</p>
    <p><strong>Venue:</strong> ${venue || "-"}</p>
    ${audienceHTML}
    <div class="deadline">${calculateDeadline(date)}</div>
  `;

  container.appendChild(card);
}

async function loadData(){

  /* Load Events */
  const { data: events } =
    await supabaseClient.from("events").select("*");

  if(events){
    events.forEach(e=>{
      createCard(e.theme, e.date, e.venue, e.audience, "Event");
    });
  }

  /* Load Competitions */
  const { data: competitions } =
    await supabaseClient.from("competitions").select("*");

  if(competitions){
    competitions.forEach(c=>{
      createCard(c.theme, c.competitionDate, c.venue, null, "Competition");
    });
  }

}

loadData();

</script>

</body>
</html>
